function h(e,a){const t=[2,0,1,1,1,2];let o;return e%100>4&&e%100<20?o=2:o=t[Math.min(e%10,5)],a[o]}const m=document.querySelectorAll('[data-audio="audio"]');for(let e of m){const a=e.querySelector('[data-audio="audio-button"]'),t=e.querySelector('[data-audio="audio-play"]'),o=e.querySelector('[data-audio="audio-icon"]');a.addEventListener("click",()=>{q(e,m),t.paused?S(t,a,o):f(t,a,o)})}function S(e,a,t){e.play(),a.style.backgroundColor="transparent",t.style.fill="white"}function f(e,a,t){e.pause(),a.style.backgroundColor="white",t.style.fill="var(--primary)"}function q(e,a){for(let t of a)if(t!==e){const o=t.querySelector('[data-audio="audio-button"]'),n=t.querySelector('[data-audio="audio-play"]'),s=t.querySelector('[data-audio="audio-icon"]');f(n,o,s)}}function y(e){e.classList.remove("flex"),e.classList.add("hidden")}function v(e){e.classList.remove("hidden"),e.classList.add("flex"),console.log("open modal")}function k(e,a){const t=document.querySelectorAll('[data-open-modal-id="open-modal-map"]'),o=document.querySelector('[data-modal-id="modal-map"]'),n=o.querySelector('[data-modal="cross"]');for(let s of t)s.addEventListener("click",()=>v(o));n.addEventListener("click",()=>y(o)),o.addEventListener("click",s=>{s.target.closest('[data-modal="window"]')||y(o)})}k();function i(e,a,t){const n=document.getElementById(e).querySelector('[data-timer="progress-circle"]'),r=2*Math.PI*28,c=r-t/a*r;n.style.strokeDashoffset=c,n.style.strokeDasharray=r,n.style.transition="stroke-dashoffset 0.5s",setTimeout(()=>{n.style.transition="none"},500)}function g(){const t=new Date("2025-05-17T00:00:00")-new Date,o=Math.floor(t/(1e3*60*60*24)),n=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),s=Math.floor(t%(1e3*60*60)/(1e3*60)),r=Math.floor(t%(1e3*60)/1e3);return[o,n,s,r]}function d(e,a,t){const o=document.getElementById(e),n=o.querySelector('[data-timer="value"]'),s=o.querySelector('[data-timer="measurement"]');n.textContent=a,s.textContent=h(a,t)}function D(){const e=g(),a=e[0],t=e[1],o=e[2],n=e[3];d("timer-day",a,["день","дня","дней"]),i("timer-day",365,a),d("timer-hour",t,["час","часа","часов"]),i("timer-hour",24,t),d("timer-minute",o,["минута","минуты","минут"]),i("timer-minute",60,o),d("timer-second",n,["секунда","секунды","секунд"]),i("timer-second",60,n)}setInterval(D,1e3);const l=document.querySelector('[data-form="survey"]');l.addEventListener("submit",async e=>{e.preventDefault();const a=l.querySelector('[data-form="loader"]'),t=l.querySelector('[data-form="success-icon"]'),o=l.querySelector('[data-form="error-message"]');a.style.display="block",t.style.display="none",o.style.display="none";const n=document.querySelectorAll('input[type="radio"]');let s;for(let u of n)u.checked&&(s=u.value);const r={name:document.getElementById("name").value,isPresent:s},c=await fetch("/api/survey",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),p=await c.json();a.style.display="none",c.ok?t.style.display="flex":(o.style.display="block",console.error(p.message))});
